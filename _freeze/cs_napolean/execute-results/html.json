{
  "hash": "7f491ed13645f00bb69371c4d1fdedb6",
  "result": {
    "markdown": "---\noutput: html_document\neditor_options: \n  chunk_output_type: console\n---\n\n\n# 나폴레옹 러시아 침공\n\n\n### 나폴레옹\n\n![](images/about_napoleon.png)\n\n### 미나르 지도\n\n![](images/Minard.png)\n\n### 실제 침공\n\n![](images/minard-actual-map.png)\n\n### 데이터\n\n\n#### 생존병사 수\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(HistData)\nlibrary(reactable)\nlibrary(tidyverse)\n\ndata(Minard.troops) \ndata(Minard.cities)\ndata(Minard.temp)\n\nMinard.troops %>% \n  select(-group) %>% \n  reactable(\n    defaultPageSize = 5, minRows = 5,  filterable = FALSE, showPagination = TRUE,\n    columns = list(\n      long = colDef(name = \"위도\", align = \"center\"),\n      lat = colDef(name = \"경도\", align = \"center\" ),\n      survivors = colDef(name = \"생존병사수\", align = \"center\", format = colFormat(separators = TRUE ) ),\n      direction = colDef(name = \"진격방향\", align = \"center\")\n    )\n  )  \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"reactable html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-8f28b1567bd674c592cc\" style=\"width:auto;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-8f28b1567bd674c592cc\">{\"x\":{\"tag\":{\"name\":\"Reactable\",\"attribs\":{\"data\":{\"long\":[24,24.5,25.5,26,27,28,28.5,29,30,30.3,32,33.2,34.4,35.5,36,37.6,37.7,37.5,37,36.8,35.4,34.3,33.3,32,30.4,29.2,28.5,28.3,27.5,26.8,26.4,25,24.4,24.2,24.1,24,24.5,25.5,26.6,27.4,28.7,28.7,29.2,28.5,28.3,24,24.5,24.6,24.6,24.2,24.1],\"lat\":[54.9,55,54.5,54.7,54.8,54.9,55,55.1,55.2,55.3,54.8,54.9,55.5,55.4,55.5,55.8,55.7,55.7,55,55,55.3,55.2,54.8,54.6,54.4,54.3,54.2,54.3,54.5,54.3,54.4,54.4,54.4,54.4,54.4,55.1,55.2,54.7,55.7,55.6,55.5,55.5,54.2,54.1,54.2,55.2,55.3,55.8,55.8,54.4,54.4],\"survivors\":[340000,340000,340000,320000,300000,280000,240000,210000,180000,175000,145000,140000,127100,100000,100000,100000,100000,98000,97000,96000,87000,55000,37000,24000,20000,20000,20000,20000,20000,12000,14000,8000,4000,4000,4000,60000,60000,60000,40000,33000,33000,33000,30000,30000,28000,22000,22000,6000,6000,6000,6000],\"direction\":[\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"R\",\"R\",\"R\",\"R\",\"R\",\"R\",\"R\",\"R\",\"R\",\"R\",\"R\",\"R\",\"R\",\"R\",\"R\",\"R\",\"R\",\"R\",\"R\",\"A\",\"A\",\"A\",\"A\",\"A\",\"A\",\"R\",\"R\",\"R\",\"R\",\"A\",\"A\",\"A\",\"R\",\"R\",\"R\"]},\"columns\":[{\"id\":\"long\",\"name\":\"위도\",\"type\":\"numeric\",\"align\":\"center\"},{\"id\":\"lat\",\"name\":\"경도\",\"type\":\"numeric\",\"align\":\"center\"},{\"id\":\"survivors\",\"name\":\"생존병사수\",\"type\":\"numeric\",\"format\":{\"cell\":{\"separators\":true},\"aggregated\":{\"separators\":true}},\"align\":\"center\"},{\"id\":\"direction\",\"name\":\"진격방향\",\"type\":\"factor\",\"align\":\"center\"}],\"defaultPageSize\":5,\"showPagination\":true,\"minRows\":5,\"dataKey\":\"673d3bb85764c39b30c143741c50d002\"},\"children\":[]},\"class\":\"reactR_markup\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n#### 후퇴 기온\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(Minard.temp)\n\nMinard.temp %>% \n  reactable(\n    defaultPageSize = 5, minRows = 5,  filterable = FALSE, showPagination = TRUE,\n    columns = list(\n      long = colDef(name = \"위도\", align = \"center\"),\n      temp = colDef(name = \"기온\", align = \"center\" ),\n      days = colDef(name = \"후퇴날짜\", align = \"center\"),\n      date = colDef(name = \"관측날짜\", align = \"center\")\n    )\n  )  \n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"reactable html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-895d7af2c1f799282bcb\" style=\"width:auto;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-895d7af2c1f799282bcb\">{\"x\":{\"tag\":{\"name\":\"Reactable\",\"attribs\":{\"data\":{\"long\":[37.6,36,33.2,32,29.2,28.5,27.2,26.7,25.3],\"temp\":[0,0,-9,-21,-11,-20,-24,-30,-26],\"days\":[6,6,16,5,10,4,3,5,1],\"date\":[\"Oct18\",\"Oct24\",\"Nov09\",\"Nov14\",null,\"Nov28\",\"Dec01\",\"Dec06\",\"Dec07\"]},\"columns\":[{\"id\":\"long\",\"name\":\"위도\",\"type\":\"numeric\",\"align\":\"center\"},{\"id\":\"temp\",\"name\":\"기온\",\"type\":\"numeric\",\"align\":\"center\"},{\"id\":\"days\",\"name\":\"후퇴날짜\",\"type\":\"numeric\",\"align\":\"center\"},{\"id\":\"date\",\"name\":\"관측날짜\",\"type\":\"factor\",\"align\":\"center\"}],\"defaultPageSize\":5,\"showPagination\":true,\"minRows\":5,\"dataKey\":\"6c6cfa80e5cf0aba0ce65a5566db5e3d\"},\"children\":[]},\"class\":\"reactR_markup\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n### 시각화\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(HistData)\n\ndata(Minard.troops)\ndata(Minard.cities)\ndata(Minard.temp)\n\n## Not run: \n#' ## Load required packages\nrequire(ggplot2)\nrequire(scales)\nrequire(gridExtra)\n\nlevels(Minard.cities$city) <- c(\"Bobr\", \"Chjat\", \"Dorogobouge\", \"Gloubokoe\", \"Kowno\", \"Malo-Jarosewii\", \n                                \"Minsk\", \"Mohilow\", \"Moiodexno\", \"Mojaisk\", \"모스코바\", \"Orscha\", \n                                \"Polotzk\", \"Smolensk\", \"Smorgoni\", \"Studienska\", \"Tarantino\", \n                                \"Wilna\", \"Witebsk\", \"Wixma\")\n\n#' ## plot path of troops, and another layer for city names\nplot_troops <- ggplot(Minard.troops, aes(long, lat)) +\n\tgeom_path(aes(size = survivors, colour = direction, group = group),\n               lineend = \"round\", linejoin = \"round\")\nplot_cities <- geom_text(aes(label = city), size = 4, data = Minard.cities)\n \n#' ## Combine these, and add scale information, labels, etc.\n#' Set the x-axis limits for longitude explicitly, to coincide with those for temperature\n\nbreaks <- c(1, 2, 3) * 10^5 \nplot_minard <- plot_troops + plot_cities +\n \tscale_size(\"생존병사수\", range = c(1, 10), \n \t            breaks = breaks, labels = scales::comma(breaks)) +\n  scale_color_manual(\"진격방향\", \n                     values = c(\"grey50\", \"red\"), \n                     labels=c(\"진격\", \"후퇴\")) +\n  coord_cartesian(xlim = c(24, 38)) +\n  labs(x = NULL,\n       y = \"경도\",\n       title = \"나폴레옹 러시아 침공\",\n       subtitle = \"1812년 6월 24일 ~ 1813년 1월 5일\") +\n  theme_korean() +\n  theme(legend.position=c(.8, .2), legend.box=\"horizontal\")\n \nlibrary(ggrepel)\n#' ## plot temperature vs. longitude, with labels for dates\nplot_temp <- Minard.temp %>% \n  mutate(date = case_when(str_detect(date, \"Oct\") ~ str_replace(date, \"Oct\", \"10월\"),\n                          str_detect(date, \"Nov\") ~ str_replace(date, \"Nov\", \"11월\"),\n                          str_detect(date, \"Dec\") ~ str_replace(date, \"Dec\", \"12월\"),\n                           TRUE ~ \"미상\")) %>% \n  mutate(date = glue::glue(\"{date}일\")) %>% \n  mutate(date = ifelse(date == \"미상일\", \"미상\", date)) %>% \n  ggplot(aes(long, temp)) +\n  \tgeom_path(color=\"grey\", size=1.5) +\n  \tgeom_point(size=2) +\n  \tgeom_text_repel(aes(label=glue::glue(\"{date}\")) ) +\n  \txlab(\"위도\") + ylab(\"기온\") +\n  \tcoord_cartesian(xlim = c(24, 38)) + \n  \ttheme_bw()\n\t\n#' Combine the two plots into one\nminard_g <- grid.arrange(plot_minard, plot_temp, nrow=2, heights=c(3,1))\n\nggsave( glue::glue(\"images/나폴레옹_러시아.png\") , \n        minard_g,\n        device = ragg::agg_png, \n        width = 297, height = 210, units = \"mm\", res = 600)\n```\n:::\n\n\n![](images/나폴레옹_러시아.png){fig-align=\"center\" width=\"707\"}\n\n[[Re-Visions of Minard](https://www.datavis.ca/gallery/re-minard.php)]{.aside}\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/core-js-2.5.3/shim.min.js\"></script>\r\n<script src=\"site_libs/react-17.0.0/react.min.js\"></script>\r\n<script src=\"site_libs/react-17.0.0/react-dom.min.js\"></script>\r\n<script src=\"site_libs/reactwidget-1.0.0/react-tools.js\"></script>\r\n<script src=\"site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\r\n<link href=\"site_libs/reactable-0.4.4/reactable.css\" rel=\"stylesheet\" />\r\n<script src=\"site_libs/reactable-binding-0.4.4/reactable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}